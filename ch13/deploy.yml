- name: install Docker
  hosts: all
  become: True
  tasks:
    - name: install packages
      apt: name={{ item }} update_cache=yes cache_valid_time=3600
      with_items:
        - apt-transport-https
        - ca-certificates
        - linux-image-extra-virtual-{{ ansible_kernel }}
        - linux-image-extra-virtual
        - software-properties-common
    - name: add Docker's GPG key
      apt_key:
          id: 58118E89F3A912897C070ADBF76221572C52609D
          url: https://yum.dockerproject.org/gpg
    - name: add Docker stable repository
      apt_repository:
        repo: deb https://apt.dockerproject.org/repo/ubuntu-{{ansible_distribution_release}} main
        update_cache: yes
    - name: install Docker
      apt: name=docker-engine





